â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROOT CAUSE ANALYSIS: Why "Duplicate entry '5146'" Keeps Happening
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OBSERVAÈšIE DIN LOG (15.01.2026 15:11):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Mesajul COMPLET de eroare (acum vizibil):

   Eroare la baza de date WordPress:
   [Duplicate entry '5146' for key 'PRIMARY']
   INSERT INTO wplt_wc_product_meta_lookup (product_id, sku)

INTERPRETARE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Eroarea NU vine de la INSERT Ã®n wp_posts - aia funcÈ›ioneazÄƒ!
Eroarea vine din INSERT Ã®n wplt_wc_product_meta_lookup!

FLUXUL REAL DE ERROARE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. POST /products cu SKU=WEBGSM-000324-2691
   â†“
2. WooCommerce creeazÄƒ product Ã®n wp_posts
   â†“
   âœ“ INSERT INTO wp_posts â†’ ID=5146 (SUCCESS)
   âœ“ INSERT INTO wp_postmeta â†’ (SUCCESS)
   â†“
3. WooCommerce creeazÄƒ meta-lookup entry
   â†“
   âœ— INSERT INTO wplt_wc_product_meta_lookup (product_id=5146, sku=...)
   âœ— FAIL: "Duplicate entry '5146' for key 'PRIMARY'"
   â†“
4. Rollback: È˜terg din wp_posts? NU â†’ rÄƒmÃ¢ne phantom
   â†“
5. Rezultat: Product ID=5146 Ã®n wp_posts dar FÄ‚RÄ‚ meta_lookup
   â†“
6. RETRY cu next ID=5147
   â†“
7. Ciclu se repetÄƒ... 5148, 5149, 5150, etc.

CAUZA REALÄ‚ - DATABASE CORRUPTION:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Tabelul wplt_wc_product_meta_lookup are orphaned entries din:
- Tentativele de import anterioare (5141-5145)
- Alte failed imports
- Posibil corrupted indexes

Cand WooCommerce incearcÄƒ INSERT cu product_id=5146:
- DacÄƒ tabelul are deja un entry cu ID=5146 (orphaned)
- MySQL refuzÄƒ: "Duplicate entry" (PRIMARY KEY constraint)

PROBA:
â”€â”€â”€â”€â”€â”€

Fiecare retry creazÄƒ phantom ID SECVENÈšIAL:
5146 â†’ 5147 â†’ 5148 â†’ 5149 â†’ 5150

DacÄƒ ar fi conflict de SKU, ar vedea alt mesaj.
Dar mesajul e PRIMARY KEY - asta Ã®nseamnÄƒ:
- Tabelul meta_lookup are Ã®nregistrÄƒri orfane
- Acelea trebuie È˜TERSE

SOLUÈšIA - 2 OPÈšIUNI:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… OPÈšIUNEA 1: QUICK FIX (recomandatÄƒ)
   1. RuleazÄƒ URGENT_DATABASE_REPAIR.txt Ã®n phpMyAdmin
   2. È˜terge orphaned entries
   3. Repair table
   4. RelanseazÄƒ import

âœ… OPÈšIUNEA 2: NUCLEAR CLEANUP (dacÄƒ 1 nu merge)
   1. Backup database
   2. DELETE all products (wp_posts WHERE post_type='product')
   3. DELETE from meta tables
   4. Rebuild
   5. RelanseazÄƒ import

DE CE NU S-A DESCOPERIT MAI DEVREME:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Versiunile anterioare:
- Logau doar "Status 400" â†’ nelamuritor
- NU arÄƒtau mesajul complet de la WordPress
- Ascundeau INSERT INTO wplt_wc_product_meta_lookup

Versiunea 3.3:
âœ… AfiÈ™eazÄƒ MESAJUL COMPLET de eroare
âœ… AratÄƒ cÄƒ e problema INSERT meta_lookup
âœ… Nu mai e mystery!

NEXT STEPS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. â¸ï¸ STOP - nu mai rula import acum
2. ğŸ”§ REPAIR - RuleazÄƒ URGENT_DATABASE_REPAIR.txt
3. âœ… VERIFY - ConfirmÄƒ cÄƒ cleanup a funcÈ›ionat
4. ğŸš€ RETRY - RelanseazÄƒ import

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
