â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                            â•‘
â•‘            ğŸ”´ CURÄ‚ÈšARE NUCLEARÄ‚ - Resetare AUTO_INCREMENT                   â•‘
â•‘                                                                            â•‘
â•‘  Problema: WooCommerce creeazÄƒ ID Ã®n wp_posts, dar eÈ™ueazÄƒ Ã®n meta_lookup   â•‘
â•‘  ID-ul rÄƒmÃ¢ne BLOCAT È™i AUTO_INCREMENT nu se reseteazÄƒ corect               â•‘
â•‘                                                                            â•‘
â•‘  SOLUÈšIE: È˜terge TOATE produsele parÈ›ial create È™i reseteazÄƒ AUTO_INCREMENT â•‘
â•‘                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


âš ï¸ ATENÈšIE CRITICÄ‚:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Aceste comenzi VOR È˜TERGE produse din baza de date!

âœ… Pasul 1: FAI BACKUP ÃNAINTE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Deschide cPanel
2. phpMyAdmin
3. SelecteazÄƒ baza de date
4. Click "Export"
5. SalveazÄƒ fiÈ™ierul SQL local (backup!)

ABIA DUPÄ‚ ce ai backup: continuÄƒ mai jos


âœ… Pasul 2: IDENTIFICÄ‚ CE TREBUIE È˜TERS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

RuleazÄƒ ACEASTÄ‚ comandÄƒ pentru a vedea ce produse e incomplete:

-- VERIFICA: Produse FÄ‚RÄ‚ Ã®nregistrare Ã®n meta_lookup
SELECT p.ID, p.post_title, p.post_status
FROM wplt_posts p
LEFT JOIN wplt_wc_product_meta_lookup m ON p.ID = m.product_id
WHERE p.post_type = 'product'
  AND m.product_id IS NULL
ORDER BY p.ID DESC;

-- Rezultat: Vei vedea lista ID-urilor orfane (5121, 5123, 5125, etc.)


âœ… Pasul 3: È˜TERGE TOATE REFERINÈšELE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CopiazÄƒ È™i ruleazÄƒ ACESTE 3 comenzi PE RÃ‚ND:

-- 1. È˜terge din postmeta
DELETE FROM wplt_postmeta 
WHERE post_id NOT IN (
    SELECT ID FROM wplt_posts WHERE ID IS NOT NULL
);

-- 2. È˜terge din term_relationships
DELETE FROM wplt_term_relationships 
WHERE object_id NOT IN (
    SELECT ID FROM wplt_posts WHERE ID IS NOT NULL
);

-- 3. È˜terge produsele incomplete din wp_posts
DELETE FROM wplt_posts 
WHERE post_type = 'product'
  AND ID NOT IN (
    SELECT product_id FROM wplt_wc_product_meta_lookup
  );


âœ… Pasul 4: RESETEAZÄ‚ AUTO_INCREMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â­ ACEASTA E CHEIA!

1. GÄƒseÈ™te MAX(ID) pentru produse COMPLETE:
   SELECT MAX(ID) as max_valid_id
   FROM wplt_posts p
   WHERE p.post_type = 'product'
     AND EXISTS (
         SELECT 1 FROM wplt_wc_product_meta_lookup 
         WHERE product_id = p.ID
     );

   Rezultat: Ex: max_valid_id = 5 (dacÄƒ nu ai NICIUN produs valid)
   Sau: max_valid_id = NULL (dacÄƒ table e goalÄƒ)

2. Daca e NULL (tabel gol), seteazÄƒ la 1:
   ALTER TABLE wplt_posts AUTO_INCREMENT = 1;

3. Daca e un numÄƒr (ex 5), seteazÄƒ la MAX+1:
   ALTER TABLE wplt_posts AUTO_INCREMENT = 6;

4. VerificÄƒ cÄƒ s-a schimbat:
   SELECT AUTO_INCREMENT FROM information_schema.TABLES 
   WHERE TABLE_NAME = 'wplt_posts';


âœ… Pasul 5: CURAÈšÄ‚ SI ALTE TABELE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

-- È˜terge SKU-uri NULL din meta_lookup
DELETE FROM wplt_wc_product_meta_lookup 
WHERE sku IS NULL OR sku = '';

-- OptimizeazÄƒ tabele
OPTIMIZE TABLE wplt_posts;
OPTIMIZE TABLE wplt_postmeta;
OPTIMIZE TABLE wplt_wc_product_meta_lookup;


âœ… Pasul 6: VERIFICA FINAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

RuleazÄƒ aceste comenzi pentru a confirma cÄƒ e curat:

-- Ar trebui 0 orfane:
SELECT COUNT(*) as orphan_count FROM wplt_posts p
WHERE p.post_type = 'product'
  AND NOT EXISTS (
    SELECT 1 FROM wplt_wc_product_meta_lookup 
    WHERE product_id = p.ID
  );

-- Ar trebui 0 duplicate SKU:
SELECT sku, COUNT(*) FROM wplt_wc_product_meta_lookup 
WHERE sku IS NOT NULL AND sku != ''
GROUP BY sku HAVING COUNT(*) > 1;

-- Trebuie sÄƒ se potriveascÄƒ:
SELECT COUNT(*) as products FROM wplt_posts WHERE post_type = 'product';
SELECT COUNT(*) as meta_lookup FROM wplt_wc_product_meta_lookup;


ğŸ¯ PAÈ˜I FINALI:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… FÄƒ BACKUP (export SQL)
2. âœ… RuleazÄƒ Pasul 2 (verificÄƒ ce e de È™ters)
3. âœ… RuleazÄƒ Pasul 3 (È™terge orfanele)
4. âœ… RuleazÄƒ Pasul 4 (reseteazÄƒ AUTO_INCREMENT - IMPORTANT!)
5. âœ… RuleazÄƒ Pasul 5 (curaÈ›Äƒ È™i optimizeazÄƒ)
6. âœ… RuleazÄƒ Pasul 6 (verificÄƒ final)
7. âœ… Clear cache WooCommerce â†’ Status â†’ Tools â†’ Clear transients
8. âœ… GoleÈ™ Trash din WooCommerce (Produse â†’ Trash â†’ Delete permanently)
9. âœ… RelanseazÄƒ importul!


âš ï¸ IMPORTANT: Prefixul tabelei!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Prefixul tÄƒu e: wplt_ (nu wp_!)

ÃNLOCUIEÈ˜TE ÃN TOATE COMENZILE DE SUS:
  wp_posts       â†’ wplt_posts
  wp_postmeta    â†’ wplt_postmeta
  wp_wc_product_meta_lookup â†’ wplt_wc_product_meta_lookup
  wp_term_relationships â†’ wplt_term_relationships


ğŸ“Œ DETALII PENTRU DEBUGGING:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DacÄƒ tot nu funcÈ›ioneazÄƒ dupÄƒ curÄƒÈ›are:

1. VerificÄƒ cÄƒ AUTO_INCREMENT e setat corect:
   SHOW CREATE TABLE wplt_posts\G

   Ar trebui sÄƒ arate: AUTO_INCREMENT=X (unde X e MAX_ID + 1)

2. VerificÄƒ cÄƒ nu sunt alte duplicate:
   SELECT ID, post_title, post_status FROM wplt_posts 
   WHERE post_type = 'product' ORDER BY ID DESC LIMIT 10;

3. Verifica logul WordPress:
   wp-content/debug.log (dacÄƒ e enabled)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
COMANDÄ‚ RAPID CU TOTUL (pentru copy-paste direct):

START AQUI - COPY PASTE DIRECT ÃN phpMyAdmin:

-- Backup is your responsibility!

-- È˜terge orfane din postmeta
DELETE FROM wplt_postmeta WHERE post_id NOT IN (SELECT ID FROM wplt_posts WHERE ID IS NOT NULL);

-- È˜terge orfane din term_relationships
DELETE FROM wplt_term_relationships WHERE object_id NOT IN (SELECT ID FROM wplt_posts WHERE ID IS NOT NULL);

-- È˜terge produse incomplete
DELETE FROM wplt_posts WHERE post_type = 'product' AND ID NOT IN (SELECT product_id FROM wplt_wc_product_meta_lookup);

-- ReseteazÄƒ AUTO_INCREMENT (dacÄƒ no valid products, seazÃ  1, otherwise MAX+1)
ALTER TABLE wplt_posts AUTO_INCREMENT = 1;

-- CuraÈ›Äƒ NULL SKU
DELETE FROM wplt_wc_product_meta_lookup WHERE sku IS NULL OR sku = '';

-- OptimizeazÄƒ
OPTIMIZE TABLE wplt_posts;
OPTIMIZE TABLE wplt_postmeta;
OPTIMIZE TABLE wplt_wc_product_meta_lookup;

-- Verifi
SELECT COUNT(*) FROM wplt_posts WHERE post_type = 'product';
SELECT COUNT(*) FROM wplt_wc_product_meta_lookup;

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ultima actualizare: 15 Ianuarie 2026
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
